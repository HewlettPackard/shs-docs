
# Resolved Issues
|ID|Description|Impact|Component|Affected Version/s|
|:--:|:---------|:---------|:----|:----|
|3345767|Using more than 252 processes per node can cause Command failure in some workloads|This issue was first uncovered with Slingshot Host Software 13.0 with Slurm 25.05 or PALS 1.6X.    <br>  <br>  If the application is attempting to run on more than 252 processes as requested through the Workload Managers (WLM), it will fail and see the "Command Failure" message because it will not be able to allocate resources to run.<br>  <br>  This was documented in Customer Advisory cr00000125<br>  <br>  This issue required changes in Slingshot Host Software as well as the the Workload Managers.  <br>  <br>  Depending on your usage, the following versions (or greater) are needed to get the fix:  <br>  SHS 13.1.0<br>  Slurm 25.11<br>  PALS 1.8.0|cxicore|SHS v13.0.0|
|3331088|Stop NIC for pktbuf\_rd\_err |The cxi-driver is able to disable the SS200/SS400 NIC upon certain unrecoverable errors. "pbuf\_rd\_err" will now be classified as one of these unrecoverable errors.<br>  This will require a reboot of the Node to recover.|cxicore|SHS v11.0.0|
|3302804|kdreg2 hang running OSU microbenchmark 14.0|Resolved a locking issue with kdreg2 which resulted in a hang requiring a reboot of the node.|kdreg2|SHS v12.0.1<br>  SHS v12.0.2|
|3279093|Explicitly set the eager size to 2048 to fix inadvertent size change to 16K |The default setting for FI\_CXI\_RDZV\_EAGER\_SIZE was returned to 2048 from the SHS-13.0 setting of 16384 and the fi\_cxi.7. There is no change with explicit setting of FI\_CXI\_RDZV\_EAGER\_SIZE, it was previously and will be continued to be honored. The default for FI\_CXI\_RDZV\_THRESHOLD remains 16384. When rendezvous criteria are met, FI\_CXI\_RDZV\_EAGER\_SIZE data is sent with the put, while the remainder is read with a get.|cxiprov<br>  libfabric|SHS v13.0.0|
|3274076|fi\_cxi man page needs correction|An error in the FI\_CXI\_RDZV\_GET\_MIN section of the fi\_cxi man page was corrected.  "FI\_CXI\_RDZV\_THRESHOLD" was replaced with "FI\_CXI\_EAGER\_SIZE".|libfabric|SHS v13.0.0|
|3258546|Add RHEL-9.6 Support to RXE|Support RHEL-9.6 with Soft-RoCE|rxe|SHS v13.1.0|
|3251437|Add SLES15-SP7 Support to RXE|Add Soft-RoCE support for SLES15-SP7|rxe|SHS v13.1.0|
|3222719|Performance regression with Libfabric v2.2.0rc2 and newer|OpenMPI 5.0.x exhibits a performance regression when using newer versions of Libfabric. The performance regression has so far only been observed when using OpenMPI with the LinkX Libfabric provider combined with the CXI and SHM providers and sending messages between GPU memory spaces.<br>  <br>  The recommended fix at this time is to set FI\_CXI\_RDZV\_THRESHOLD=2048<br>  <br>  See the "Libfabric performance regression" section in the HPE Slingshot Host Software User Guide for more information.|libcxi|SHS v13.0.0|
|3212093|CUDA, enable dmabuf by default for driver 580.x and beyond. |DMAbuf for cuda devices is now the default for CXI provider. This requires the nvidia 580+ driver.|libfabric|SHS v13.0.0|
|3197928|Grace Hopper EX blades crashing in cass\_rgid\_put|Problem description: Freeing RGIDs out of order exposed null ptr dereference.<br>  Description of fix: Fix free of rgid when encountering unused entry.<br>  Impact of including: Normal operation is restored.<br>  Impact of not including: Some usage patterns of RGID sharing caused a kernel panic.|cxicore|SHS v12.0.1|
|3173513|cxip\_ep\_ctrl\_event\_req: Command Failure is detected after RHEL 9.6 upgrade|Problem description: Sharing of communication profiles (CPs) among LNIs (processes) that share an RGID (hardware resource) causes command failure in some applications at high node count. <br>  Description of fix: Do not share CPs among LNIs of an RGID.<br>  Impact of including: Restores normal behavior.|cxicore|SHS v13.0.0|
|3158779|fix requirements.txt for pycxi|A python dependency for the cxiutil utility has been corrected. In previous versions, if the "docopt" package was not already installed, cxiutil would throw an exception regarding the missing package. |pycxi|SHS v13.0.0|
|3152747|Adding argument validation and strengthening slingshot-ifroute  scripts|Issue - Race Condition in IP Route Configuration After Node Boot<br>  <br>  Description: <br>  Resolved an issue where multiple instances of the slingshot-ifroute script were executed simultaneously after a node reboot. On multiâ€‘NIC nodes, this resulted in a race condition when more than one instance attempted to configure custom routes over the same HSN interface at the same time. The conflict caused corruption in the IP routing tables, leading to communication failures between nodes.<br>  <br>  Fix: <br>  This has been corrected by adding a locking mechanism to the slingshot-ifroute script, ensuring that only one instance runs at a time while others wait for the previous execution to complete.<br>  |Diagnostics|SHS v13.0.0|
|3085265|kdreg2 hang running OSU microbenchmark|Problem description:<br>  Applications using kdreg2 memory monitor may hang due to a deadlock.<br>  <br>  Description of fix:<br>  During invalidation, if the lock cannot be acquired immediately, defer processing to a workqueue that runs in process context where blocking is safe.<br>  <br>  Impact of including:<br>  Normal operation is restored.<br>  <br>  Impact of not including:<br>  Applications may hang due to deadlock, requiring a reboot of the node.|kdreg2|SHS v12.0.1<br>  SHS v12.0.2|
|3082961|MR match event count failure raises abort signal|Removed an unnecessary provider abort when a standard MR was using FI\_CXI\_MR\_MATCH\_EVENTS and was slow to reconcile match and access counts, and therefore required an invalidate. Any subsequent cancelled events can be ignored.  12/3:  Code is in Main - waiting on feedback from DAOS team.|cxiprov|SHS v12.0.0|
|2987281|CXI EP RNR protocol requires integration with CQ WAIT\_FD |Without this feature, DAOS is unable to test the new EP RNR protocol with CQ WAIT\_FD objects.|cxiprov<br>  libfabric|SHS v11.0.0|
|2984786|Rate limit number of kdreg2 kernel messages a user-space client can trigger|Control the frequency of kernel messages using rate limiting. Introduced a new feature allowing configuration of a custom log level for kdreg2, providing finer control over log verbosity.<br>  Configure using /sys/class/kdreg2/kdreg2/log\_level. Default is LOGLEVEL\_DEBUG (7).|kdreg2|SHS v11.0.0|
|2943066|Improve fi\_cntr\_wait for threaded processes|The experimental use of the environment variable FI\_CXI\_CNTR\_TRIG\_CMDQ was added that enables dedicated triggered command queue for bound counters when using FI\_THREAD\_SAFE or FI\_THREAD\_COMPLETION threading models. This can improve the performance multithreaded counter operations at the cost of command queue resources. This option is disabled by default.|cxiprov<br>  libfabric|SHS v12.0.0|
|2918140|libfabric criterion fork tests can hang with FI\_MR\_CACHE\_MONITOR="kdreg2"|Problem description:<br>  Forked child process performing memory monitoring with kdreg2 may hang.<br>  <br>  Description of fix:<br>  Improve fork detection, by checking both memory descriptor and process ID, to accurately detect a child process.<br>  <br>  Impact of including:<br>  Normal operation is restored.<br>  <br>  Impact of not including:<br>  Processes using kdreg2 may hang, requiring a reboot of the node.|kdreg2|SHS v11.0.0|
|2790942|Improve libfabric CXI provider locking for threaded environments|Locking is improved to allow concurrent read access to internal CXI provider data structures. This may lead to improved threaded operation rates.|cxiprov|SHS v11.0.0|
|2714448|Implementation of upstream disable non-inject RMA IDC usage is wrong|New experimental flags where added to disable RMA or AMO automatic use of Immediate Data Commands when FI\_INJECT is not specified. This can be useful with GPU source buffers to avoid the host copy in cases a performant copy cannot be used.<br>  <br>  FI\_CXI\_DISABLE\_NON\_INJECT\_RMA\_IDC<br>  FI\_CXI\_DISABLE\_NON\_INJECT\_AMO\_IDC|cxiprov<br>  libfabric|SHS v11.0.0|
|2416029|libfabric CXI provider: Support FI\_CXI\_DISABLE\_NON\_INJECT\_MSG\_IDC for FI\_RMA and FI\_AMOs|The inclusion of FI\_CXI\_DISABLE\_NON\_INJECT\_RMA\_IDC and FI\_CXI\_DISABLE\_NON\_INJECT\_AMO\_IDC can disable use of immediate data commands for small transfers when FI\_INJECT is not specified for RMA and AMO operations respectively. This may improve message rates for small messages where FI\_INJECT buffer behavior is not required. |cxiprov|SHS v11.0.0|
